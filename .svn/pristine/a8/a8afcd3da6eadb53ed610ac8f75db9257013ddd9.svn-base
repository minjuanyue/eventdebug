
-- ----------------------------
-- Sequence structure for drc_event_debug_detector_info_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_detector_info_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_detector_info_id_seq1
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_detector_info_id_seq1" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_low_speed_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_low_speed_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_road_close_detector_info_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_road_close_detector_info_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_road_close_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_road_close_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_traffic_accident_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_traffic_accident_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_traffic_event_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_traffic_event_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_traffic_jam_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_traffic_jam_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for drc_event_debug_ultra_low_speed_id_seq
-- ----------------------------
CREATE SEQUENCE "drc_event_debug_ultra_low_speed_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_calendar
-- ----------------------------
CREATE SEQUENCE "seq_calendar" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_event_debug_abnormal_parking
-- ----------------------------
CREATE SEQUENCE "seq_drc_event_debug_abnormal_parking" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_event_debug_road_close
-- ----------------------------
CREATE SEQUENCE "seq_drc_event_debug_road_close" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_event_debug_road_close_detector_info
-- ----------------------------
CREATE SEQUENCE "seq_drc_event_debug_road_close_detector_info" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_event_debug_traffic_accident
-- ----------------------------
CREATE SEQUENCE "seq_drc_event_debug_traffic_accident" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_event_debug_traffic_accident_obs
-- ----------------------------
CREATE SEQUENCE "seq_drc_event_debug_traffic_accident_obs" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_event_debug_traffic_jam
-- ----------------------------
CREATE SEQUENCE "seq_drc_event_debug_traffic_jam" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_gpsloc
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_gpsloc" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 10000000
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_history
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_history" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 3
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_image
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_image" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_judge_time
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_judge_time" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 10000000
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_lane
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_lane" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 10000000
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_object
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_object" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 6
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_pileloc
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_pileloc" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 10000000
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_traffic_event_utmloc
-- ----------------------------
CREATE SEQUENCE "seq_traffic_event_utmloc" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 10000000
CACHE 1;

-- ----------------------------
-- Sequence structure for traffic_event_cause_second_level_id_seq
-- ----------------------------
CREATE SEQUENCE "traffic_event_cause_second_level_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for traffic_event_lane_id_seq
-- ----------------------------
CREATE SEQUENCE "traffic_event_lane_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Table structure for calendar
-- ----------------------------
CREATE TABLE "calendar" (
  "id" int8 NOT NULL DEFAULT nextval('seq_calendar'::regclass),
  "date" timestamp(6) NOT NULL,
  "is_holiday" int2 NOT NULL
)
;
COMMENT ON COLUMN "calendar"."id" IS '主键';
COMMENT ON COLUMN "calendar"."date" IS '日期';
COMMENT ON COLUMN "calendar"."is_holiday" IS '是否节假日（0-否 1-是）';

-- ----------------------------
-- Table structure for drc_event_debug_abnormal_parking
-- ----------------------------
CREATE TABLE "drc_event_debug_abnormal_parking" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_event_debug_abnormal_parking'::regclass),
  "frame" int8,
  "sub_frame" int8,
  "rctp_id" int8,
  "event_id" int8,
  "event_type" int4,
  "state" int4,
  "c_state" int4,
  "obs_state" int4,
  "diff_distance" float8,
  "ul_max_wait_time" int8,
  "center_postion_x" float8,
  "center_postion_y" float8,
  "direc_rad" float8,
  "large_major_axis_radius" int8,
  "large_minor_axis_radius" int8,
  "small_major_axis_radius" int8,
  "small_minor_axis_radius" int8,
  "new_obs_uuid" int8,
  "new_obs_frame" int8,
  "new_obs_sub_frame" int8,
  "new_obs_x" float8,
  "new_obs_y" float8,
  "new_obs_drsu" int8,
  "new_obs_lane" int8,
  "new_obs_hdlane" int8,
  "new_obs_hd_connection" int8,
  "first_obs_uuid" int8,
  "first_obs_frame" int8,
  "first_obs_sub_frame" int8,
  "first_obs_x" float8,
  "first_obs_y" float8,
  "first_obs_drsu" int8,
  "first_obs_lane" int8,
  "first_obs_hdlane" int8,
  "first_obs_hd_connection" int8,
  "str_detector_info" varchar(512) COLLATE "pg_catalog"."default",
  "str_ext_param" varchar(1024) COLLATE "pg_catalog"."default"
)
;
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."frame" IS '帧数';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."sub_frame" IS '子帧数';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."rctp_id" IS 'rctpid';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."event_id" IS '事件id';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."event_type" IS '事件类型';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."state" IS '事件状态';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."c_state" IS '事件改变状态';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."obs_state" IS '障碍物状态';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."diff_distance" IS '障碍物当前位置与椭圆中心点坐标之间的距离';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."ul_max_wait_time" IS '最大等待时长';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."center_postion_x" IS '中心点坐标';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."center_postion_y" IS '中心点坐标';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."direc_rad" IS '方向角';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."large_major_axis_radius" IS '椭圆长轴数值';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."large_minor_axis_radius" IS '椭圆长轴数值';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."small_major_axis_radius" IS '椭圆短轴数值';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."small_minor_axis_radius" IS '椭圆短轴数值';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_uuid" IS 'uuid';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_frame" IS '当前障碍物帧数';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_sub_frame" IS '当前障碍物子帧数';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_x" IS '当前障碍物坐标';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_y" IS '当前障碍物坐标';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_drsu" IS '当前障碍物检测drsu';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_lane" IS '当前障碍物车道';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_hdlane" IS '当前障碍物对应高精地图的laneid';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."new_obs_hd_connection" IS '当前障碍物对应高精地图的connectionid';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_frame" IS '初始障碍物帧数';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_sub_frame" IS '初始障碍物子帧数';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_x" IS '初始障碍物坐标';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_y" IS '初始障碍物坐标';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_drsu" IS '初始障碍物检测drsu';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_lane" IS '初始障碍物车道';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_hdlane" IS '初始障碍物对应高精地图的laneid';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."first_obs_hd_connection" IS '初始障碍物对应高精地图的connectionid';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."str_detector_info" IS '事件参考的检测器ID';
COMMENT ON COLUMN "drc_event_debug_abnormal_parking"."str_ext_param" IS '扩展参数，用于事件应急调试';
COMMENT ON TABLE "drc_event_debug_abnormal_parking" IS '交通事件debug';

-- ----------------------------
-- Table structure for drc_event_debug_detector_info
-- ----------------------------
CREATE TABLE "drc_event_debug_detector_info" (
  "id" int8 NOT NULL DEFAULT nextval('drc_event_debug_detector_info_id_seq1'::regclass),
  "frame" int4,
  "sub_frame" int4
)
;
COMMENT ON COLUMN "drc_event_debug_detector_info"."id" IS '主键';
COMMENT ON COLUMN "drc_event_debug_detector_info"."frame" IS '帧号';
COMMENT ON COLUMN "drc_event_debug_detector_info"."sub_frame" IS '子帧号';

-- ----------------------------
-- Table structure for drc_event_debug_detector_info_detail
-- ----------------------------
CREATE TABLE "drc_event_debug_detector_info_detail" (
  "id" int8 NOT NULL DEFAULT nextval('drc_event_debug_detector_info_id_seq'::regclass),
  "sl_id" int4,
  "sl_state" int4,
  "db_avg_speed" float8,
  "sl_vels" int4,
  "db_utm_x" float8,
  "db_utm_y" float8,
  "detector_info_id" int8 NOT NULL
)
;
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."id" IS '主键';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."sl_id" IS '检测器ID';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."sl_state" IS '1表示未激活，2表示激活';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."db_avg_speed" IS '监测点平均速度';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."sl_vels" IS '监测点过车数量';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."db_utm_x" IS '坐标';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."db_utm_y" IS '坐标';
COMMENT ON COLUMN "drc_event_debug_detector_info_detail"."detector_info_id" IS 'detector_info表id';

-- ----------------------------
-- Table structure for drc_event_debug_low_speed
-- ----------------------------
CREATE TABLE "drc_event_debug_low_speed" (
  "id" int8 NOT NULL DEFAULT nextval('drc_event_debug_low_speed_id_seq'::regclass),
  "frame" int4,
  "subframe" int4,
  "event_id" int8,
  "even_type" int4,
  "state" int4,
  "uuid" int8,
  "db_obs_utm_x" float8,
  "db_obs_utm_y" float8,
  "slid" int4,
  "db_avg_speed" float8,
  "db_obs_speed" float8,
  "drsu_id" int4,
  "lane_id" int4,
  "hdlane_id" int4,
  "hdconnection_id" int4,
  "plate_no" varchar(125) COLLATE "pg_catalog"."default",
  "str_detector_info" varchar(512) COLLATE "pg_catalog"."default"
)
;
COMMENT ON COLUMN "drc_event_debug_low_speed"."id" IS '主键';
COMMENT ON COLUMN "drc_event_debug_low_speed"."frame" IS '帧数 ulSystemFrame';
COMMENT ON COLUMN "drc_event_debug_low_speed"."subframe" IS '子帧数 ulSystemSubFrame';
COMMENT ON COLUMN "drc_event_debug_low_speed"."event_id" IS '事件id Base Event id';
COMMENT ON COLUMN "drc_event_debug_low_speed"."even_type" IS '事件类型';
COMMENT ON COLUMN "drc_event_debug_low_speed"."state" IS '事件状态 0:创建, 1:更新, 2:解除';
COMMENT ON COLUMN "drc_event_debug_low_speed"."uuid" IS '当前障碍物id';
COMMENT ON COLUMN "drc_event_debug_low_speed"."db_obs_utm_x" IS '障碍物坐标_X';
COMMENT ON COLUMN "drc_event_debug_low_speed"."db_obs_utm_y" IS '障碍物坐标_Y';
COMMENT ON COLUMN "drc_event_debug_low_speed"."slid" IS '检测器ID';
COMMENT ON COLUMN "drc_event_debug_low_speed"."db_avg_speed" IS '监测点平均速度 ,单位m/s';
COMMENT ON COLUMN "drc_event_debug_low_speed"."db_obs_speed" IS '障碍物速度 , 单位m/s';
COMMENT ON COLUMN "drc_event_debug_low_speed"."drsu_id" IS 'drsu id';
COMMENT ON COLUMN "drc_event_debug_low_speed"."lane_id" IS 'lane id';
COMMENT ON COLUMN "drc_event_debug_low_speed"."hdlane_id" IS '高精地图的lane id';
COMMENT ON COLUMN "drc_event_debug_low_speed"."hdconnection_id" IS '高精地图的connection id';
COMMENT ON COLUMN "drc_event_debug_low_speed"."plate_no" IS '车牌';

-- ----------------------------
-- Table structure for drc_event_debug_road_close
-- ----------------------------
CREATE TABLE "drc_event_debug_road_close" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_event_debug_road_close'::regclass),
  "ul_frame" int8,
  "ul_sub_frame" int8,
  "ul_cycle" int8
)
;
COMMENT ON COLUMN "drc_event_debug_road_close"."ul_frame" IS '帧数';
COMMENT ON COLUMN "drc_event_debug_road_close"."ul_sub_frame" IS '子帧数';
COMMENT ON COLUMN "drc_event_debug_road_close"."ul_cycle" IS '当前周期';
COMMENT ON TABLE "drc_event_debug_road_close" IS '道路封闭事件debug';

-- ----------------------------
-- Table structure for drc_event_debug_road_close_adj_detector_info
-- ----------------------------
CREATE TABLE "drc_event_debug_road_close_adj_detector_info" (
  "drc_event_debug_road_close_detector_info_id" int8 NOT NULL,
  "sl_detector_id" int4,
  "db_coeff" float8
)
;
COMMENT ON COLUMN "drc_event_debug_road_close_adj_detector_info"."drc_event_debug_road_close_detector_info_id" IS 'drc_event_debug_road_close_detector_info主键';

-- ----------------------------
-- Table structure for drc_event_debug_road_close_detector_info
-- ----------------------------
CREATE TABLE "drc_event_debug_road_close_detector_info" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_event_debug_road_close_detector_info'::regclass),
  "drc_event_debug_road_close_id" int8 NOT NULL,
  "sl_id" int4,
  "sl_state" int4,
  "ul_vehicles_of_reach" int8,
  "ul_history_vehicles" int8,
  "ul_cycle_of_non_reach" int8,
  "ul_mean_dt" int8,
  "ul_max_dt" int8,
  "db_p" float8,
  "db_m" float8,
  "db_s2" float8,
  "sl_adj_detector_id" int4,
  "db_utm_x" float8,
  "db_utm_y" float8
)
;
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."drc_event_debug_road_close_id" IS 'drc_event_debug_road_close主键';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."sl_id" IS '检测器ID';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."sl_state" IS '1表示未激活，2表示激活';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."ul_vehicles_of_reach" IS '本周期到车数量';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."ul_history_vehicles" IS '历史到车数量';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."ul_cycle_of_non_reach" IS '未到车的周期数';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."ul_mean_dt" IS '平均DT';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."ul_max_dt" IS '最大DT';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."db_p" IS '计算出的概率';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."db_m" IS '计算使用的中间量';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."db_s2" IS '计算使用的中间量';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."sl_adj_detector_id" IS '通过slAdjDetectorId检测器将系数算出';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."db_utm_x" IS '坐标';
COMMENT ON COLUMN "drc_event_debug_road_close_detector_info"."db_utm_y" IS '坐标';

-- ----------------------------
-- Table structure for drc_event_debug_road_close_event_info
-- ----------------------------
CREATE TABLE "drc_event_debug_road_close_event_info" (
  "drc_event_debug_road_close_id" int8 NOT NULL,
  "event_id" int8,
  "even_type" int4,
  "merge_event_id" varchar(5000) COLLATE "pg_catalog"."default",
  "sl_detector_id" varchar(5000) COLLATE "pg_catalog"."default",
  "db_utm_x" float8,
  "db_utm_y" float8,
  "ul_low_vehicle_size" int4,
  "ul_low_vehicle_threshold" int4
)
;
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."drc_event_debug_road_close_id" IS 'drc_event_debug_road_close主键';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."event_id" IS '事件ID';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."even_type" IS '事件类型';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."merge_event_id" IS '被合并的事件ID';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."db_utm_x" IS '事件的位置';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."db_utm_y" IS '事件的位置';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."ul_low_vehicle_size" IS '低速车数量';
COMMENT ON COLUMN "drc_event_debug_road_close_event_info"."ul_low_vehicle_threshold" IS '低速车数量阈值';

-- ----------------------------
-- Table structure for drc_event_debug_traffic_accident
-- ----------------------------
CREATE TABLE "drc_event_debug_traffic_accident" (
  "id" int8 NOT NULL DEFAULT nextval('drc_event_debug_traffic_event_id_seq'::regclass),
  "frame" int8,
  "sub_frame" int8,
  "event_id" int8,
  "event_type" int4,
  "state" int4,
  "str_detector_info" varchar(512) COLLATE "pg_catalog"."default",
  "str_ext_param" varchar(1024) COLLATE "pg_catalog"."default",
  "center_postion_x" float8,
  "center_postion_y" float8
)
;
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."frame" IS '帧数';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."sub_frame" IS '子帧数';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."event_id" IS '事件id';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."event_type" IS '事件类型';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."state" IS '事件状态';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."str_detector_info" IS '事件参考的检测器ID';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."str_ext_param" IS '扩展参数，用于事件应急调试';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."center_postion_x" IS '中心点坐标UTM_X';
COMMENT ON COLUMN "drc_event_debug_traffic_accident"."center_postion_y" IS '中心点坐标UTM_Y';

-- ----------------------------
-- Table structure for drc_event_debug_traffic_accident_obs
-- ----------------------------
CREATE TABLE "drc_event_debug_traffic_accident_obs" (
  "drc_event_debug_traffic_accident_id" int8 NOT NULL,
  "ul_uuid" int8,
  "ul_frame_first" int8,
  "ul_frame_second" int8,
  "db_vehicle_position_x" float8,
  "db_vehicle_position_y" float8,
  "ul_master_drsu_id" int8,
  "ul_master_land_id" int8,
  "ul_hd_lane_id" int8,
  "ul_hd_connection_id" int8,
  "str_plate_no" varchar COLLATE "pg_catalog"."default",
  "is_high_flow" int2,
  "ul_ab_parking_event_id" int8
)
;

-- ----------------------------
-- Table structure for drc_event_debug_traffic_jam
-- ----------------------------
CREATE TABLE "drc_event_debug_traffic_jam" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_event_debug_traffic_jam'::regclass),
  "ul_frame" int8,
  "ul_sub_frame" int8,
  "ul_cycle" int8
)
;
COMMENT ON COLUMN "drc_event_debug_traffic_jam"."ul_frame" IS '帧数';
COMMENT ON COLUMN "drc_event_debug_traffic_jam"."ul_sub_frame" IS '子帧数';
COMMENT ON COLUMN "drc_event_debug_traffic_jam"."ul_cycle" IS '当前周期';
COMMENT ON TABLE "drc_event_debug_traffic_jam" IS '拥堵事件debug信息';

-- ----------------------------
-- Table structure for drc_event_debug_traffic_jam_detector_info
-- ----------------------------
CREATE TABLE "drc_event_debug_traffic_jam_detector_info" (
  "drc_event_debug_traffic_jam_id" int8 NOT NULL,
  "sl_id" int4,
  "sl_state" int4,
  "db_avg_speed" float8,
  "sl_vels" int4,
  "db_utm_x" float8,
  "db_utm_y" float8
)
;
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."drc_event_debug_traffic_jam_id" IS 'drc_event_debug_traffic_jam主键';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."sl_id" IS '检测器ID';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."sl_state" IS '1表示未激活，2表示激活';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."db_avg_speed" IS '监测点平均速度';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."sl_vels" IS '监测点过车数量';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."db_utm_x" IS '坐标';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_detector_info"."db_utm_y" IS '坐标';

-- ----------------------------
-- Table structure for drc_event_debug_traffic_jam_event_info
-- ----------------------------
CREATE TABLE "drc_event_debug_traffic_jam_event_info" (
  "drc_event_debug_traffic_jam_id" int8 NOT NULL,
  "event_id" int8,
  "even_type" int4,
  "merge_event_id" varchar(5000) COLLATE "pg_catalog"."default",
  "sl_detector_id" varchar(5000) COLLATE "pg_catalog"."default",
  "db_utm_x" float8,
  "db_utm_y" float8
)
;
COMMENT ON COLUMN "drc_event_debug_traffic_jam_event_info"."drc_event_debug_traffic_jam_id" IS 'drc_event_debug_traffic_jam主键';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_event_info"."event_id" IS '事件ID';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_event_info"."even_type" IS '事件类型';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_event_info"."merge_event_id" IS '被合并的事件ID';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_event_info"."db_utm_x" IS '事件的位置';
COMMENT ON COLUMN "drc_event_debug_traffic_jam_event_info"."db_utm_y" IS '事件的位置';

-- ----------------------------
-- Table structure for drc_event_debug_ultra_low_speed
-- ----------------------------
CREATE TABLE "drc_event_debug_ultra_low_speed" (
  "id" int8 NOT NULL DEFAULT nextval('drc_event_debug_ultra_low_speed_id_seq'::regclass),
  "frame" int4,
  "subframe" int4,
  "event_id" int8,
  "even_type" int4,
  "state" int4,
  "uuid" int8,
  "db_obs_utm_x" float8,
  "db_obs_utm_y" float8,
  "slid" int4,
  "db_avg_speed" float8,
  "db_obs_speed" float8,
  "drsu_id" int4,
  "lane_id" int4,
  "hdlane_id" int4,
  "hdconnection_id" int4,
  "plate_no" varchar(125) COLLATE "pg_catalog"."default",
  "str_detector_info" varchar(512) COLLATE "pg_catalog"."default"
)
;
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."id" IS '主键';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."frame" IS '帧数 ulSystemFrame';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."subframe" IS '子帧数 ulSystemSubFrame';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."event_id" IS '事件id Base Event id';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."even_type" IS '事件类型';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."state" IS '事件状态 0:创建, 1:更新, 2:解除';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."uuid" IS '当前障碍物id';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."db_obs_utm_x" IS '障碍物坐标_X';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."db_obs_utm_y" IS '障碍物坐标_Y';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."slid" IS '检测器ID';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."db_avg_speed" IS '监测点平均速度 ,单位m/s';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."db_obs_speed" IS '障碍物速度 , 单位m/s';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."drsu_id" IS 'drsu id';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."lane_id" IS 'lane id';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."hdlane_id" IS '高精地图的lane id';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."hdconnection_id" IS '高精地图的connection id';
COMMENT ON COLUMN "drc_event_debug_ultra_low_speed"."plate_no" IS '车牌';

-- ----------------------------
-- Table structure for traffic_event
-- ----------------------------
CREATE TABLE "traffic_event" (
  "traffic_event_id" int8 NOT NULL DEFAULT nextval('seq_traffic_event'::regclass),
  "drc_id" int8,
  "traffic_event_type" int4,
  "direction_indication" varchar COLLATE "pg_catalog"."default",
  "is_relieved" int2,
  "relieve_time" timestamp(6),
  "drc_event_report_id" int8,
  "is_mock" int2,
  "hd_lane_ids" varchar(255) COLLATE "pg_catalog"."default",
  "hd_connection_ids" varchar(255) COLLATE "pg_catalog"."default",
  "check_status" int2 DEFAULT 0,
  "spoiling_length" int4,
  "spoiling_width" int4,
  "spoiling_height" int4,
  "sub_node_ids" varchar(250) COLLATE "pg_catalog"."default",
  "node_ids" varchar(250) COLLATE "pg_catalog"."default",
  "priority" int4,
  "event_radius" int4,
  "velocity" int4,
  "description" varchar(2500) COLLATE "pg_catalog"."default",
  "create_time" timestamp(6),
  "update_time" timestamp(6),
  "road_name" varchar(250) COLLATE "pg_catalog"."default",
  "jam_level" int8,
  "event_confidence" int8,
  "drc_event_report_time" timestamp(6),
  "occur_time" timestamp(6),
  "traffic_event_cause" varchar COLLATE "pg_catalog"."default",
  "manual_confirm" int2,
  "forbidden_zone_id" int4,
  "section_id" varchar COLLATE "pg_catalog"."default",
  "cause_level_one" int4,
  "cause_level_two" int4
)
;
COMMENT ON COLUMN "traffic_event"."traffic_event_id" IS '事件ID';
COMMENT ON COLUMN "traffic_event"."drc_id" IS 'drcid';
COMMENT ON COLUMN "traffic_event"."traffic_event_type" IS '事件类型';
COMMENT ON COLUMN "traffic_event"."direction_indication" IS '路段方向指示';
COMMENT ON COLUMN "traffic_event"."is_relieved" IS '事件是否解除：0正常，1解除';
COMMENT ON COLUMN "traffic_event"."relieve_time" IS '事件解除事件yyyy-MM-dd HH:mm:ss';
COMMENT ON COLUMN "traffic_event"."drc_event_report_id" IS 'drc上报ID';
COMMENT ON COLUMN "traffic_event"."is_mock" IS '是否幸存者';
COMMENT ON COLUMN "traffic_event"."hd_lane_ids" IS '高精车道';
COMMENT ON COLUMN "traffic_event"."hd_connection_ids" IS '高精路口';
COMMENT ON COLUMN "traffic_event"."check_status" IS '是否审核（ 0-未审核  1-已审核）';
COMMENT ON COLUMN "traffic_event"."spoiling_length" IS '抛洒物长度';
COMMENT ON COLUMN "traffic_event"."spoiling_width" IS '抛洒物宽度';
COMMENT ON COLUMN "traffic_event"."spoiling_height" IS '抛洒物高度';
COMMENT ON COLUMN "traffic_event"."sub_node_ids" IS '飞步方案：为可调用视频的DRSUID  ITS800方案：希望是点位下具体相机ID';
COMMENT ON COLUMN "traffic_event"."node_ids" IS '监测出事件的节点ID,在飞步方案中为DRSUID，在ITS800方案为ITS800点位ID,对拥堵事件/道路维修事件可以为列表';
COMMENT ON COLUMN "traffic_event"."priority" IS '事件优先级';
COMMENT ON COLUMN "traffic_event"."event_radius" IS '对于拥堵或道路封闭事件指拥堵长度或道路封闭长度；其他事件可以固定写死范围';
COMMENT ON COLUMN "traffic_event"."velocity" IS '拥堵事件专有，平均车速 m/s';
COMMENT ON COLUMN "traffic_event"."description" IS '事件描述';
COMMENT ON COLUMN "traffic_event"."road_name" IS '道路名称';
COMMENT ON COLUMN "traffic_event"."jam_level" IS '拥堵等级';
COMMENT ON COLUMN "traffic_event"."event_confidence" IS '事件置信度';
COMMENT ON COLUMN "traffic_event"."drc_event_report_time" IS 'DRC上报时的时间戳';
COMMENT ON COLUMN "traffic_event"."occur_time" IS 'DRC第一次的上报时间';
COMMENT ON COLUMN "traffic_event"."traffic_event_cause" IS '事件成因';
COMMENT ON COLUMN "traffic_event"."manual_confirm" IS '人工确认（0-未确认 1-已确认）';
COMMENT ON COLUMN "traffic_event"."forbidden_zone_id" IS '禁行区ID，若此字段有值则表示在禁行区，否则表示不在禁行区';
COMMENT ON COLUMN "traffic_event"."section_id" IS '路段ID';
COMMENT ON COLUMN "traffic_event"."cause_level_one" IS '一级原因';
COMMENT ON COLUMN "traffic_event"."cause_level_two" IS '二级原因';

-- ----------------------------
-- Table structure for traffic_event_cause_first_level
-- ----------------------------
CREATE TABLE "traffic_event_cause_first_level" (
  "id" int4 NOT NULL,
  "first_level_cause" varchar(64) COLLATE "pg_catalog"."default"
)
;
COMMENT ON COLUMN "traffic_event_cause_first_level"."id" IS '编号';
COMMENT ON COLUMN "traffic_event_cause_first_level"."first_level_cause" IS '一级原因';

-- ----------------------------
-- Table structure for traffic_event_cause_second_level
-- ----------------------------
CREATE TABLE "traffic_event_cause_second_level" (
  "id" int4 NOT NULL DEFAULT nextval('traffic_event_cause_second_level_id_seq'::regclass),
  "first_level_cause_id" int4,
  "second_level_cause" varchar(64) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Table structure for traffic_event_gpsloc
-- ----------------------------
CREATE TABLE "traffic_event_gpsloc" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_gpsloc'::regclass),
  "traffic_event_history_id" int8,
  "lng" int4,
  "lat" int4,
  "ele" int4
)
;
COMMENT ON COLUMN "traffic_event_gpsloc"."id" IS '主键';
COMMENT ON COLUMN "traffic_event_gpsloc"."traffic_event_history_id" IS '事件历史ID';
COMMENT ON COLUMN "traffic_event_gpsloc"."lng" IS '经度';
COMMENT ON COLUMN "traffic_event_gpsloc"."lat" IS '纬度';
COMMENT ON COLUMN "traffic_event_gpsloc"."ele" IS '高度';

-- ----------------------------
-- Table structure for traffic_event_history
-- ----------------------------
CREATE TABLE "traffic_event_history" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_history'::regclass),
  "traffic_event_id" int8 NOT NULL,
  "drc_id" int8,
  "traffic_event_type" int4,
  "direction_indication" varchar COLLATE "pg_catalog"."default",
  "is_relieved" int2,
  "relieve_time" timestamp(6),
  "drc_event_report_id" int8,
  "is_mock" int2,
  "hd_lane_ids" varchar(255) COLLATE "pg_catalog"."default",
  "hd_connection_ids" varchar(255) COLLATE "pg_catalog"."default",
  "check_status" int2,
  "spoiling_length" int4,
  "spoiling_width" int4,
  "spoiling_height" int4,
  "sub_node_ids" varchar(250) COLLATE "pg_catalog"."default",
  "node_ids" varchar(250) COLLATE "pg_catalog"."default",
  "priority" int4,
  "event_radius" int4,
  "velocity" int4,
  "description" varchar(2500) COLLATE "pg_catalog"."default",
  "create_time" timestamp(6),
  "update_time" timestamp(6),
  "road_name" varchar(250) COLLATE "pg_catalog"."default",
  "jam_level" int8,
  "event_confidence" int8,
  "drc_event_report_time" timestamp(6),
  "traffic_event_cause" varchar COLLATE "pg_catalog"."default",
  "forbidden_zone_id" int4,
  "section_id" varchar COLLATE "pg_catalog"."default",
  "cause_level_one" int4,
  "cause_level_two" int4
)
;
COMMENT ON COLUMN "traffic_event_history"."traffic_event_cause" IS '事件成因';
COMMENT ON COLUMN "traffic_event_history"."forbidden_zone_id" IS '禁行区ID，若此字段有值则表示在禁行区，否则表示不在禁行区';
COMMENT ON COLUMN "traffic_event_history"."cause_level_one" IS '一级原因';
COMMENT ON COLUMN "traffic_event_history"."cause_level_two" IS '二级原因';

-- ----------------------------
-- Table structure for traffic_event_image
-- ----------------------------
CREATE TABLE "traffic_event_image" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_image'::regclass),
  "traffic_event_id" int8,
  "image_url" varchar COLLATE "pg_catalog"."default",
  "create_time" timestamp(6),
  "pre_image_url" varchar COLLATE "pg_catalog"."default",
  "image_path" varchar(255) COLLATE "pg_catalog"."default",
  "pre_image_path" varchar(255) COLLATE "pg_catalog"."default"
)
;
COMMENT ON COLUMN "traffic_event_image"."id" IS '主键ID';
COMMENT ON COLUMN "traffic_event_image"."traffic_event_id" IS '事件ID';
COMMENT ON COLUMN "traffic_event_image"."image_url" IS '事件图片url';
COMMENT ON COLUMN "traffic_event_image"."create_time" IS '创建时间';
COMMENT ON COLUMN "traffic_event_image"."pre_image_url" IS '缩略图';
COMMENT ON COLUMN "traffic_event_image"."image_path" IS '事件图片path';
COMMENT ON COLUMN "traffic_event_image"."pre_image_path" IS '本地缩略图';
COMMENT ON TABLE "traffic_event_image" IS '事件截图表';

-- ----------------------------
-- Table structure for traffic_event_judge_time
-- ----------------------------
CREATE TABLE "traffic_event_judge_time" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_judge_time'::regclass),
  "traffic_event_history_id" int8,
  "judge_time" timestamp(6)
)
;
COMMENT ON COLUMN "traffic_event_judge_time"."id" IS '主键';
COMMENT ON COLUMN "traffic_event_judge_time"."traffic_event_history_id" IS '事件历史ID';
COMMENT ON COLUMN "traffic_event_judge_time"."judge_time" IS '事件判定时间';

-- ----------------------------
-- Table structure for traffic_event_lane
-- ----------------------------
CREATE TABLE "traffic_event_lane" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_lane'::regclass),
  "traffic_event_history_id" int8,
  "lane_id" int4,
  "lane_type" int4,
  "create_time" timestamp(6)
)
;
COMMENT ON COLUMN "traffic_event_lane"."id" IS '主键';
COMMENT ON COLUMN "traffic_event_lane"."traffic_event_history_id" IS '关联事件历史表ID';
COMMENT ON COLUMN "traffic_event_lane"."lane_id" IS '车道ID';
COMMENT ON COLUMN "traffic_event_lane"."lane_type" IS '车道类型';
COMMENT ON COLUMN "traffic_event_lane"."create_time" IS '创建时间';

-- ----------------------------
-- Table structure for traffic_event_object
-- ----------------------------
CREATE TABLE "traffic_event_object" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_object'::regclass),
  "traffic_event_history_id" int8,
  "object_id" int8,
  "object_type" int2,
  "vehicle_color" varchar(255) COLLATE "pg_catalog"."default",
  "plate_type" varchar(255) COLLATE "pg_catalog"."default",
  "plate_color" varchar(255) COLLATE "pg_catalog"."default",
  "plate_num" varchar COLLATE "pg_catalog"."default",
  "object_speed" int8,
  "create_time" timestamp(6),
  "obj_track_id" int8,
  "track_ids" varchar(1000) COLLATE "pg_catalog"."default",
  "entry_time" int8,
  "utm_x" int8,
  "utm_y" int8,
  "utm_z" int8,
  "target_camera_ip" varchar(255) COLLATE "pg_catalog"."default"
)
;
COMMENT ON COLUMN "traffic_event_object"."id" IS '主键';
COMMENT ON COLUMN "traffic_event_object"."traffic_event_history_id" IS '事件历史ID';
COMMENT ON COLUMN "traffic_event_object"."object_id" IS '障碍物ID';
COMMENT ON COLUMN "traffic_event_object"."object_type" IS '障碍物类型';
COMMENT ON COLUMN "traffic_event_object"."vehicle_color" IS '车辆颜色';
COMMENT ON COLUMN "traffic_event_object"."plate_type" IS '车牌类型';
COMMENT ON COLUMN "traffic_event_object"."plate_color" IS '车牌颜色';
COMMENT ON COLUMN "traffic_event_object"."plate_num" IS '车牌号码';
COMMENT ON COLUMN "traffic_event_object"."object_speed" IS '障碍物速度';
COMMENT ON COLUMN "traffic_event_object"."create_time" IS '创建时间';
COMMENT ON COLUMN "traffic_event_object"."obj_track_id" IS 'drc融合前障碍物trackId';
COMMENT ON COLUMN "traffic_event_object"."track_ids" IS '障碍物trackId集合，第一个id是刚进入点位的track id';
COMMENT ON COLUMN "traffic_event_object"."entry_time" IS '障碍物进入事件点位的时间';
COMMENT ON COLUMN "traffic_event_object"."utm_x" IS 'utm x';
COMMENT ON COLUMN "traffic_event_object"."utm_y" IS 'utm y';
COMMENT ON COLUMN "traffic_event_object"."utm_z" IS 'utm z';
COMMENT ON COLUMN "traffic_event_object"."target_camera_ip" IS '目标对应的相机ip，仅路段使用';

-- ----------------------------
-- Table structure for traffic_event_pileloc
-- ----------------------------
CREATE TABLE "traffic_event_pileloc" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_pileloc'::regclass),
  "traffic_event_history_id" int8,
  "number" varchar(255) COLLATE "pg_catalog"."default",
  "distance" int8
)
;
COMMENT ON COLUMN "traffic_event_pileloc"."id" IS '主键';
COMMENT ON COLUMN "traffic_event_pileloc"."traffic_event_history_id" IS '事件历史ID';
COMMENT ON COLUMN "traffic_event_pileloc"."number" IS '里程桩号';
COMMENT ON COLUMN "traffic_event_pileloc"."distance" IS '里程桩距离';

-- ----------------------------
-- Table structure for traffic_event_utmloc
-- ----------------------------
CREATE TABLE "traffic_event_utmloc" (
  "id" int8 NOT NULL DEFAULT nextval('seq_traffic_event_utmloc'::regclass),
  "traffic_event_history_id" int8,
  "utm_x" int8,
  "utm_y" int8,
  "utm_z" int8
)
;
COMMENT ON COLUMN "traffic_event_utmloc"."id" IS '主键';
COMMENT ON COLUMN "traffic_event_utmloc"."traffic_event_history_id" IS '事件历史ID';
COMMENT ON COLUMN "traffic_event_utmloc"."utm_x" IS 'utmx';
COMMENT ON COLUMN "traffic_event_utmloc"."utm_y" IS 'utmy';
COMMENT ON COLUMN "traffic_event_utmloc"."utm_z" IS 'utmz';

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_detector_info_id_seq"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_detector_info_id_seq1"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_low_speed_id_seq"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_road_close_detector_info_id_seq"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_road_close_id_seq"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_traffic_accident_id_seq"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_traffic_event_id_seq"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_traffic_jam_id_seq"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"drc_event_debug_ultra_low_speed_id_seq"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_calendar"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_drc_event_debug_abnormal_parking"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_drc_event_debug_road_close"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_drc_event_debug_road_close_detector_info"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_drc_event_debug_traffic_accident"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_drc_event_debug_traffic_accident_obs"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_drc_event_debug_traffic_jam"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_gpsloc"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_history"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_image"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_judge_time"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_lane"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_object"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_pileloc"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"seq_traffic_event_utmloc"', 2, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"traffic_event_cause_second_level_id_seq"', 2, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
SELECT setval('"traffic_event_lane_id_seq"', 2, false);

-- ----------------------------
-- Indexes structure for table calendar
-- ----------------------------
CREATE INDEX "calendar_is_holiday_idx" ON "calendar" USING btree (
  "is_holiday" "pg_catalog"."int2_ops" ASC NULLS LAST
);

-- ----------------------------
-- Uniques structure for table calendar
-- ----------------------------
ALTER TABLE "calendar" ADD CONSTRAINT "calendar_un" UNIQUE ("date");

-- ----------------------------
-- Primary Key structure for table calendar
-- ----------------------------
ALTER TABLE "calendar" ADD CONSTRAINT "traffic_event_calendar_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_abnormal_parking
-- ----------------------------
CREATE INDEX "frame_index_abnormal_parking" ON "drc_event_debug_abnormal_parking" USING btree (
  "frame" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_abnormal_parking
-- ----------------------------
ALTER TABLE "drc_event_debug_abnormal_parking" ADD CONSTRAINT "drc_event_debug_traffic_accident_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_detector_info
-- ----------------------------
CREATE INDEX "info_frame_index" ON "drc_event_debug_detector_info" USING btree (
  "frame" "pg_catalog"."int4_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_detector_info
-- ----------------------------
ALTER TABLE "drc_event_debug_detector_info" ADD CONSTRAINT "drc_event_debug_detector_info_pkey1" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_detector_info_detail
-- ----------------------------
CREATE INDEX "detector_info_index" ON "drc_event_debug_detector_info_detail" USING btree (
  "detector_info_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_detector_info_detail
-- ----------------------------
ALTER TABLE "drc_event_debug_detector_info_detail" ADD CONSTRAINT "drc_event_debug_detector_info_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table drc_event_debug_low_speed
-- ----------------------------
ALTER TABLE "drc_event_debug_low_speed" ADD CONSTRAINT "drc_event_debug_low_speed_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table drc_event_debug_road_close
-- ----------------------------
ALTER TABLE "drc_event_debug_road_close" ADD CONSTRAINT "drc_event_debug_road_close_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_road_close_adj_detector_info
-- ----------------------------
CREATE INDEX "drc_event_debug_road_close_adj_detector_info_drc_event_debug_ro" ON "drc_event_debug_road_close_adj_detector_info" USING btree (
  "drc_event_debug_road_close_detector_info_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Indexes structure for table drc_event_debug_road_close_detector_info
-- ----------------------------
CREATE INDEX "drc_event_debug_road_close_detector_info_drc_event_debug_road_c" ON "drc_event_debug_road_close_detector_info" USING btree (
  "drc_event_debug_road_close_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_road_close_detector_info
-- ----------------------------
ALTER TABLE "drc_event_debug_road_close_detector_info" ADD CONSTRAINT "drc_event_debug_road_close_detector_info_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_road_close_event_info
-- ----------------------------
CREATE INDEX "drc_event_debug_road_close_event_info_drc_event_debug_road_clos" ON "drc_event_debug_road_close_event_info" USING btree (
  "drc_event_debug_road_close_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Indexes structure for table drc_event_debug_traffic_accident
-- ----------------------------
CREATE INDEX "event_id_master_index" ON "drc_event_debug_traffic_accident" USING btree (
  "event_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);
CREATE INDEX "frame_index" ON "drc_event_debug_traffic_accident" USING btree (
  "frame" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_traffic_accident
-- ----------------------------
ALTER TABLE "drc_event_debug_traffic_accident" ADD CONSTRAINT "drc_event_debug_traffic_event_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_traffic_accident_obs
-- ----------------------------
CREATE INDEX "drc_event_debug_traffic_accident_obs_drc_event_debug_traffic_ac" ON "drc_event_debug_traffic_accident_obs" USING btree (
  "drc_event_debug_traffic_accident_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_traffic_jam
-- ----------------------------
ALTER TABLE "drc_event_debug_traffic_jam" ADD CONSTRAINT "drc_event_debug_traffic_jam_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table drc_event_debug_traffic_jam_detector_info
-- ----------------------------
CREATE INDEX "drc_event_debug_traffic_jam_detector_info_drc_event_debug_traff" ON "drc_event_debug_traffic_jam_detector_info" USING btree (
  "drc_event_debug_traffic_jam_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Indexes structure for table drc_event_debug_traffic_jam_event_info
-- ----------------------------
CREATE INDEX "drc_event_debug_traffic_jam_event_info_drc_event_debug_traffic_" ON "drc_event_debug_traffic_jam_event_info" USING btree (
  "drc_event_debug_traffic_jam_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table drc_event_debug_ultra_low_speed
-- ----------------------------
ALTER TABLE "drc_event_debug_ultra_low_speed" ADD CONSTRAINT "drc_event_debug_ultra_low_speed_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event
-- ----------------------------
CREATE INDEX "traffic_event_drc_event_report_id_idx" ON "traffic_event" USING btree (
  "drc_event_report_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);
CREATE INDEX "traffic_event_drc_event_report_time_idx" ON "traffic_event" USING btree (
  "drc_event_report_time" "pg_catalog"."timestamp_ops" ASC NULLS LAST
);
CREATE INDEX "traffic_event_is_relieved_idx" ON "traffic_event" USING btree (
  "is_relieved" "pg_catalog"."int2_ops" ASC NULLS LAST
);
CREATE INDEX "traffic_event_occur_time_idx" ON "traffic_event" USING btree (
  "occur_time" "pg_catalog"."timestamp_ops" ASC NULLS LAST,
  "check_status" "pg_catalog"."int2_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event
-- ----------------------------
ALTER TABLE "traffic_event" ADD CONSTRAINT "traffic_event_pkey" PRIMARY KEY ("traffic_event_id");

-- ----------------------------
-- Primary Key structure for table traffic_event_cause_first_level
-- ----------------------------
ALTER TABLE "traffic_event_cause_first_level" ADD CONSTRAINT "traffic_event_cause_first_level_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table traffic_event_cause_second_level
-- ----------------------------
ALTER TABLE "traffic_event_cause_second_level" ADD CONSTRAINT "traffic_event_cause_second_level_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_gpsloc
-- ----------------------------
CREATE INDEX "traffic_event_gpsloc_traffic_event_history_id_idx" ON "traffic_event_gpsloc" USING btree (
  "traffic_event_history_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_gpsloc
-- ----------------------------
ALTER TABLE "traffic_event_gpsloc" ADD CONSTRAINT "traffic_event_gpsloc_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_history
-- ----------------------------
CREATE INDEX "traffic_event_history_drc_event_report_id_idx" ON "traffic_event_history" USING btree (
  "drc_event_report_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);
CREATE INDEX "traffic_event_history_traffic_event_id_idx" ON "traffic_event_history" USING btree (
  "traffic_event_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_history
-- ----------------------------
ALTER TABLE "traffic_event_history" ADD CONSTRAINT "traffic_event_history_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_image
-- ----------------------------
CREATE INDEX "traffic_event_image_traffic_event_id_idx" ON "traffic_event_image" USING btree (
  "traffic_event_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_image
-- ----------------------------
ALTER TABLE "traffic_event_image" ADD CONSTRAINT "traffic_event_image_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_judge_time
-- ----------------------------
CREATE INDEX "traffic_event_judge_time_traffic_event_history_id_idx" ON "traffic_event_judge_time" USING btree (
  "traffic_event_history_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_judge_time
-- ----------------------------
ALTER TABLE "traffic_event_judge_time" ADD CONSTRAINT "traffic_event_judge_time_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Primary Key structure for table traffic_event_lane
-- ----------------------------
ALTER TABLE "traffic_event_lane" ADD CONSTRAINT "traffic_event_lane_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_object
-- ----------------------------
CREATE INDEX "traffic_event_object_traffic_event_history_id_idx" ON "traffic_event_object" USING btree (
  "traffic_event_history_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_object
-- ----------------------------
ALTER TABLE "traffic_event_object" ADD CONSTRAINT "traffic_event_object_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_pileloc
-- ----------------------------
CREATE INDEX "traffic_event_pileloc_number_idx" ON "traffic_event_pileloc" USING btree (
  "number" COLLATE "pg_catalog"."default" "pg_catalog"."text_ops" ASC NULLS LAST
);
CREATE INDEX "traffic_event_pileloc_traffic_event_history_id_idx" ON "traffic_event_pileloc" USING btree (
  "traffic_event_history_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_pileloc
-- ----------------------------
ALTER TABLE "traffic_event_pileloc" ADD CONSTRAINT "traffic_event_pileloc_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Indexes structure for table traffic_event_utmloc
-- ----------------------------
CREATE INDEX "traffic_event_utmloc_traffic_event_history_id_idx" ON "traffic_event_utmloc" USING btree (
  "traffic_event_history_id" "pg_catalog"."int8_ops" ASC NULLS LAST
);

-- ----------------------------
-- Primary Key structure for table traffic_event_utmloc
-- ----------------------------
ALTER TABLE "traffic_event_utmloc" ADD CONSTRAINT "traffic_event_utmloc_pkey" PRIMARY KEY ("id");



-- ----------------------------
-- 增加ul_drc_id
-- ----------------------------

ALTER TABLE drc_event_debug_abnormal_parking ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";

ALTER TABLE drc_event_debug_traffic_jam ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";

ALTER TABLE drc_event_debug_low_speed ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";

ALTER TABLE drc_event_debug_road_close ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";

ALTER TABLE drc_event_debug_traffic_accident ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";

ALTER TABLE drc_event_debug_ultra_low_speed ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";

ALTER TABLE drc_event_debug_detector_info ADD COLUMN "ul_drc_id" varchar(512) COLLATE "pg_catalog"."default";


-- ----------------------------
-- 2022-11-01-智能车轨迹
-- ----------------------------

-- ----------------------------
-- Sequence structure for seq_drc_vt_position
-- ----------------------------
CREATE SEQUENCE "seq_drc_vt_position" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_road_info_to_zebra
-- ----------------------------
CREATE SEQUENCE "seq_drc_road_info_to_zebra" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_zebra_obstcle
-- ----------------------------
CREATE SEQUENCE "seq_drc_zebra_obstcle" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for seq_drc_zebra_traffic_ligth
-- ----------------------------
CREATE SEQUENCE "seq_drc_zebra_traffic_ligth" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9223372036854775807
START 1
CACHE 1;


CREATE TABLE "drc_vt_position" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_vt_position'::regclass),
  "ul_trans_id" int8,
  "ul_drc_id" int8,
  "str_vt_id" varchar(256) COLLATE "pg_catalog"."default",
  "str_plate_number" varchar(128) COLLATE "pg_catalog"."default",
  "st_position_x" float8,
  "st_position_y" float8,
  "st_position_z" float8,
  "st_speed_x" float8,
  "st_speed_y" float8,
  "st_speed_z" float8,
  "sl_lane_id" int8,
  "sl_connection_id" int8,
  "sl_timestamp" int8
)
;


CREATE TABLE "drc_road_info_to_zebra" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_road_info_to_zebra'::regclass),
  "road_info_to_zebra_id" int8,
  "ul_trans_id" int8,
  "ul_drc_id" int8,
  "ul_dev_type" int2,
  "str_vt_id" varchar(256) COLLATE "pg_catalog"."default",
  "ul_recommended_speed_x" float8,
  "ul_recommended_speed_y" float8,
  "ul_recommended_speed_z" float8,
  "e_quit_emg_cause" int2,
  "st_position_x" float8,
  "st_position_y" float8,
  "st_position_z" float8,
  "st_theta" float8,
  "drc_timestamp" float8
)
;

CREATE TABLE "drc_zebra_obstcle" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_zebra_obstcle'::regclass),
  "zebra_id" int8,
  "zebra_obstcle_id" int8,
  "object_type" int2,
  "center_x" float8,
  "center_y" float8,
  "center_z" float8,
  "theta" float8,
  "length" float8,
  "width" float8,
  "height" float8,
  "speed_x" float8,
  "speed_y" float8,
  "speed_z" float8,
  "vehicle_class" varchar(256) COLLATE "pg_catalog"."default",
  "vehicle_color" varchar(256) COLLATE "pg_catalog"."default",
  "vehicle_brand" varchar(256) COLLATE "pg_catalog"."default",
  "vehicle_model" varchar(256) COLLATE "pg_catalog"."default",
  "vehicle_styles" varchar(256) COLLATE "pg_catalog"."default",
  "plate_class" varchar(256) COLLATE "pg_catalog"."default",
  "plate_color" varchar(256) COLLATE "pg_catalog"."default",
  "plate_no" varchar(256) COLLATE "pg_catalog"."default",
  "dra_timestamp" float8
)
;


CREATE TABLE "drc_zebra_traffic_ligth" (
  "id" int8 NOT NULL DEFAULT nextval('seq_drc_zebra_traffic_ligth'::regclass),
  "zebra_id" int8,
  "st_position_x" float8,
  "st_position_y" float8,
  "st_position_z" float8,
  "e_color" int2,
  "e_light_type" int2,
  "ul_is_twinkle" int4,
  "ul_countdown_time" int4,
  "ul_id" int8
)
;

-- ----------------------------
-- 2022-11-22-事件增加行人数量-轨迹增加matchFlag
-- ----------------------------

ALTER TABLE traffic_event ADD COLUMN "person_num" int4;

ALTER TABLE drc_road_info_to_zebra ADD COLUMN "ul_match_flag" int4;

-- ----------------------------
-- 2022-12-1-新增了异常停车与占道施工的一些字段
-- ----------------------------
ALTER TABLE drc_event_debug_abnormal_parking ADD COLUMN "vehicle_type" int4;

ALTER TABLE drc_event_debug_road_close_event_info ADD COLUMN "ul_relieve_count" int4;

ALTER TABLE drc_event_debug_road_close_detector_info ADD COLUMN "ul_active_source" int4;
ALTER TABLE drc_event_debug_road_close_detector_info ADD COLUMN "ul_active_frame" int8;
ALTER TABLE drc_event_debug_road_close_detector_info ADD COLUMN "ul_active_sub_frame" int8;
ALTER TABLE drc_event_debug_road_close_detector_info ADD COLUMN "ul_vels" int8;

-- ----------------------------
-- 2022-12-22-新增了异常停车 车牌字段
-- ----------------------------
ALTER TABLE drc_event_debug_abnormal_parking ADD COLUMN str_plate_no varchar(128) COLLATE "pg_catalog"."default";
